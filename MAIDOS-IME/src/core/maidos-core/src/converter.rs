//! Charset conversion module
//!
//! This module provides conversion between Simplified and Traditional Chinese.
//! Covers all GB2312 Simplified-Traditional correspondences, ~2,500 character mappings.

use maidos_config::Charset;
use std::collections::HashMap;

/// Simplified-to-Traditional mapping table (~2,500 chars)
fn simplified_to_traditional_map() -> HashMap<char, char> {
    let pairs: &[(char, char)] = &[
        // ===== High-frequency common characters =====
        ('们', '們'), ('会', '會'), ('说', '說'), ('话', '話'), ('个', '個'),
        ('来', '來'), ('时', '時'), ('国', '國'), ('为', '為'), ('发', '發'),
        ('门', '門'), ('车', '車'), ('书', '書'), ('学', '學'), ('样', '樣'),
        ('习', '習'), ('这', '這'), ('坏', '壞'), ('长', '長'), ('旧', '舊'),
        ('后', '後'), ('红', '紅'), ('黄', '黃'), ('蓝', '藍'), ('绿', '綠'),
        ('东', '東'),

        // ===== Pronouns =====
        ('谁', '誰'), ('几', '幾'), ('么', '麼'),

        // ===== Verbs =====
        ('让', '讓'), ('认', '認'), ('识', '識'), ('请', '請'), ('读', '讀'),
        ('写', '寫'), ('听', '聽'), ('见', '見'), ('觉', '覺'), ('记', '記'),
        ('议', '議'), ('讨', '討'), ('论', '論'), ('诉', '訴'), ('设', '設'),
        ('计', '計'), ('许', '許'), ('评', '評'), ('证', '證'), ('试', '試'),
        ('语', '語'), ('该', '該'), ('详', '詳'), ('谈', '談'), ('误', '誤'),
        ('诚', '誠'), ('调', '調'), ('谢', '謝'), ('谷', '穀'), ('课', '課'),
        ('诗', '詩'), ('词', '詞'), ('译', '譯'), ('护', '護'), ('报', '報'),
        ('担', '擔'), ('拥', '擁'), ('挡', '擋'), ('挣', '掙'), ('据', '據'),
        ('抢', '搶'), ('扰', '擾'), ('拣', '揀'), ('择', '擇'), ('换', '換'),
        ('摇', '搖'), ('搜', '搜'), ('损', '損'), ('掉', '掉'), ('操', '操'),
        ('扩', '擴'), ('拦', '攔'), ('拨', '撥'), ('拟', '擬'), ('抛', '拋'),

        // ===== Common verbs (cont.) =====
        ('办', '辦'), ('动', '動'), ('务', '務'), ('劳', '勞'), ('势', '勢'),
        ('劝', '勸'), ('励', '勵'), ('胜', '勝'), ('败', '敗'), ('战', '戰'),
        ('赶', '趕'), ('过', '過'), ('运', '運'), ('进', '進'), ('远', '遠'),
        ('达', '達'), ('迁', '遷'), ('还', '還'), ('选', '選'), ('送', '送'),
        ('连', '連'), ('适', '適'), ('通', '通'), ('逻', '邏'), ('辑', '輯'),
        ('边', '邊'), ('辞', '辭'), ('辩', '辯'), ('辨', '辨'), ('获', '獲'),
        ('献', '獻'), ('独', '獨'), ('猎', '獵'), ('玩', '玩'), ('环', '環'),
        ('现', '現'), ('产', '產'), ('画', '畫'), ('当', '當'), ('疗', '療'),
        ('尽', '盡'), ('监', '監'), ('盘', '盤'), ('观', '觀'), ('览', '覽'),
        ('规', '規'), ('视', '視'), ('亲', '親'), ('触', '觸'), ('订', '訂'),
        ('讲', '講'), ('属', '屬'),

        // ===== Nouns =====
        ('经', '經'), ('济', '濟'), ('纪', '紀'), ('线', '線'), ('组', '組'),
        ('织', '織'), ('细', '細'), ('结', '結'), ('终', '終'), ('绝', '絕'),
        ('给', '給'), ('统', '統'), ('继', '繼'), ('续', '續'), ('编', '編'),
        ('缘', '緣'), ('练', '練'), ('绩', '績'), ('缺', '缺'), ('网', '網'),
        ('罗', '羅'), ('义', '義'), ('举', '舉'), ('岁', '歲'), ('岛', '島'),
        ('岭', '嶺'), ('层', '層'), ('属', '屬'), ('币', '幣'), ('师', '師'),
        ('帅', '帥'), ('归', '歸'), ('广', '廣'), ('厅', '廳'), ('厂', '廠'),
        ('历', '歷'), ('压', '壓'), ('县', '縣'), ('参', '參'), ('双', '雙'),
        ('变', '變'), ('号', '號'), ('叶', '葉'), ('台', '臺'), ('同', '同'),
        ('体', '體'), ('余', '餘'), ('佣', '傭'), ('价', '價'), ('侠', '俠'),
        ('传', '傳'), ('伤', '傷'), ('优', '優'), ('华', '華'), ('单', '單'),
        ('卖', '賣'), ('占', '佔'), ('卫', '衛'), ('厉', '厲'), ('团', '團'),
        ('园', '園'), ('围', '圍'), ('图', '圖'), ('圆', '圓'), ('圣', '聖'),
        ('场', '場'), ('块', '塊'), ('坚', '堅'), ('坛', '壇'), ('壮', '壯'),
        ('声', '聲'), ('处', '處'), ('备', '備'), ('复', '復'), ('头', '頭'),
        ('夺', '奪'), ('奋', '奮'), ('奖', '獎'), ('妇', '婦'), ('妆', '妝'),
        ('姐', '姐'), ('婴', '嬰'), ('宝', '寶'), ('实', '實'), ('宫', '宮'),
        ('宪', '憲'), ('专', '專'), ('将', '將'), ('寿', '壽'), ('对', '對'),
        ('导', '導'), ('尘', '塵'), ('尝', '嘗'), ('尧', '堯'),
        ('局', '局'), ('层', '層'), ('屿', '嶼'),
        ('带', '帶'), ('帮', '幫'), ('干', '幹'),
        ('庄', '莊'), ('庆', '慶'), ('库', '庫'), ('应', '應'), ('开', '開'),
        ('异', '異'), ('弯', '彎'), ('张', '張'), ('弹', '彈'), ('强', '強'),
        ('归', '歸'), ('录', '錄'), ('影', '影'),
        ('从', '從'), ('众', '眾'), ('优', '優'), ('伟', '偉'), ('侧', '側'),

        // ===== Nouns (cont.) =====
        ('剑', '劍'), ('创', '創'), ('别', '別'), ('制', '製'), ('刘', '劉'),
        ('刚', '剛'), ('剂', '劑'), ('割', '割'),
        ('区', '區'), ('医', '醫'), ('千', '千'), ('协', '協'),
        ('危', '危'), ('厌', '厭'), ('原', '原'), ('去', '去'),
        ('吕', '呂'), ('吨', '噸'), ('咏', '詠'), ('响', '響'),
        ('品', '品'), ('哲', '哲'), ('商', '商'), ('售', '售'),
        ('喷', '噴'), ('器', '器'), ('严', '嚴'),

        // ===== Adjectives =====
        ('丰', '豐'), ('严', '嚴'), ('临', '臨'), ('丽', '麗'),
        ('难', '難'), ('静', '靜'), ('灵', '靈'), ('惊', '驚'),
        ('简', '簡'), ('类', '類'), ('紧', '緊'), ('热', '熱'),
        ('态', '態'), ('怀', '懷'), ('恳', '懇'), ('惭', '慚'),
        ('惨', '慘'), ('愤', '憤'), ('恒', '恆'), ('恼', '惱'),
        ('悦', '悅'), ('惯', '慣'), ('愿', '願'), ('忆', '憶'),
        ('惧', '懼'), ('憎', '憎'), ('懒', '懶'),

        // ===== Numbers / Measure words =====
        ('万', '萬'), ('亿', '億'), ('丝', '絲'), ('两', '兩'),
        ('吨', '噸'), ('条', '條'), ('张', '張'), ('阵', '陣'),
        ('颗', '顆'), ('际', '際'), ('顿', '頓'),

        // ===== Body / Organs =====
        ('脏', '臟'), ('脑', '腦'), ('肠', '腸'), ('肾', '腎'),
        ('肤', '膚'), ('胆', '膽'), ('脉', '脈'), ('胶', '膠'),
        ('龄', '齡'), ('齿', '齒'), ('须', '鬚'), ('骨', '骨'),
        ('髓', '髓'), ('肿', '腫'),

        // ===== Food / Dining =====
        ('饭', '飯'), ('饮', '飲'), ('饱', '飽'), ('饿', '餓'),
        ('饺', '餃'), ('饼', '餅'), ('馒', '饅'), ('馆', '館'),
        ('馈', '饋'), ('饲', '飼'), ('饰', '飾'),

        // ===== Transportation / Architecture =====
        ('桥', '橋'), ('楼', '樓'), ('栏', '欄'), ('标', '標'),
        ('栋', '棟'), ('枪', '槍'), ('柜', '櫃'), ('梦', '夢'),
        ('检', '檢'), ('档', '檔'), ('栅', '柵'), ('杨', '楊'),
        ('构', '構'), ('极', '極'), ('杰', '傑'), ('柠', '檸'),
        ('树', '樹'), ('样', '樣'), ('桨', '槳'), ('权', '權'),
        ('机', '機'), ('杂', '雜'), ('札', '札'), ('朴', '樸'),

        // ===== Metals / Minerals =====
        ('钢', '鋼'), ('铁', '鐵'), ('铜', '銅'), ('银', '銀'),
        ('铝', '鋁'), ('锌', '鋅'), ('钱', '錢'), ('铃', '鈴'),
        ('针', '針'), ('钻', '鑽'), ('铅', '鉛'), ('锁', '鎖'),
        ('镜', '鏡'), ('链', '鏈'), ('锅', '鍋'), ('铸', '鑄'),
        ('锋', '鋒'), ('锐', '銳'), ('锤', '錘'), ('锦', '錦'),
        ('键', '鍵'), ('锭', '錠'), ('镀', '鍍'), ('镇', '鎮'),
        ('铺', '鋪'), ('铭', '銘'), ('锈', '鏽'),

        // ===== Animals =====
        ('鸡', '雞'), ('鸟', '鳥'), ('鸭', '鴨'), ('鸽', '鴿'),
        ('鸣', '鳴'), ('鹤', '鶴'), ('鹰', '鷹'), ('鹿', '鹿'),
        ('龙', '龍'), ('龟', '龜'), ('鱼', '魚'), ('鲜', '鮮'),
        ('鲸', '鯨'), ('鳄', '鱷'), ('虫', '蟲'), ('蚕', '蠶'),
        ('蜡', '蠟'), ('蝇', '蠅'), ('蚁', '蟻'), ('蛮', '蠻'),
        ('猫', '貓'), ('猪', '豬'), ('狮', '獅'), ('狱', '獄'),
        ('犹', '猶'), ('猎', '獵'), ('猛', '猛'), ('兽', '獸'),
        ('马', '馬'), ('驾', '駕'), ('骑', '騎'), ('骗', '騙'),
        ('骄', '驕'), ('驱', '驅'), ('验', '驗'), ('驻', '駐'),
        ('驰', '馳'), ('骆', '駱'),

        // ===== Weather / Nature =====
        ('风', '風'), ('云', '雲'), ('雾', '霧'), ('雷', '雷'),
        ('电', '電'), ('阳', '陽'), ('阴', '陰'), ('雪', '雪'),
        ('雨', '雨'), ('霜', '霜'), ('冰', '冰'),

        // ===== Clothing =====
        ('袜', '襪'), ('裤', '褲'), ('衬', '襯'), ('裙', '裙'),
        ('袄', '襖'), ('裹', '裹'), ('褐', '褐'),

        // ===== Military / Politics =====
        ('军', '軍'), ('阵', '陣'), ('阶', '階'), ('队', '隊'),
        ('陈', '陳'), ('阁', '閣'), ('闪', '閃'), ('阅', '閱'),
        ('闭', '閉'), ('间', '間'), ('闲', '閒'), ('闻', '聞'),
        ('问', '問'), ('闹', '鬧'), ('阔', '闊'), ('阀', '閥'),
        ('关', '關'), ('防', '防'), ('际', '際'), ('限', '限'),
        ('院', '院'), ('险', '險'), ('随', '隨'), ('隐', '隱'),
        ('隶', '隸'), ('难', '難'), ('集', '集'),

        // ===== Academic / Education =====
        ('科', '科'), ('秘', '祕'), ('种', '種'), ('称', '稱'),
        ('积', '積'), ('秩', '秩'), ('税', '稅'), ('稳', '穩'),
        ('窃', '竊'), ('窗', '窗'), ('穷', '窮'), ('窝', '窩'),
        ('竞', '競'), ('笔', '筆'), ('筑', '築'), ('算', '算'),
        ('管', '管'), ('箱', '箱'), ('节', '節'), ('篇', '篇'),
        ('简', '簡'), ('签', '簽'), ('粮', '糧'), ('糊', '糊'),
        ('纯', '純'), ('纲', '綱'), ('纳', '納'), ('纷', '紛'),
        ('纸', '紙'), ('级', '級'), ('纽', '紐'), ('纹', '紋'),
        ('纺', '紡'), ('绍', '紹'), ('经', '經'), ('绒', '絨'),
        ('绕', '繞'), ('绘', '繪'), ('络', '絡'), ('绳', '繩'),
        ('维', '維'), ('绵', '綿'), ('综', '綜'), ('缚', '縛'),
        ('缝', '縫'), ('缩', '縮'), ('缴', '繳'), ('缸', '缸'),
        ('罢', '罷'),

        // ===== Food / Agriculture =====
        ('粮', '糧'), ('粒', '粒'), ('粗', '粗'), ('粹', '粹'),
        ('糖', '糖'), ('糕', '糕'), ('粉', '粉'),
        ('农', '農'), ('麦', '麥'), ('丰', '豐'),

        // ===== Daily items =====
        ('灯', '燈'), ('灶', '竈'), ('灾', '災'), ('炉', '爐'),
        ('烛', '燭'), ('烟', '煙'), ('烧', '燒'), ('烫', '燙'),
        ('热', '熱'), ('焰', '焰'), ('煮', '煮'),

        // ===== Abstract concepts =====
        ('质', '質'), ('贡', '貢'), ('财', '財'), ('贫', '貧'),
        ('货', '貨'), ('贪', '貪'), ('贯', '貫'), ('责', '責'),
        ('贵', '貴'), ('贸', '貿'), ('费', '費'), ('贺', '賀'),
        ('资', '資'), ('赈', '賑'), ('赏', '賞'), ('赔', '賠'),
        ('购', '購'), ('赖', '賴'), ('赚', '賺'), ('赢', '贏'),
        ('赠', '贈'),

        // ===== Abstract concepts (cont.) =====
        ('能', '能'), ('脱', '脫'), ('务', '務'), ('势', '勢'),
        ('点', '點'), ('总', '總'), ('艺', '藝'), ('苏', '蘇'),
        ('范', '範'), ('茧', '繭'), ('荣', '榮'), ('药', '藥'),
        ('荡', '蕩'), ('莲', '蓮'), ('获', '獲'), ('萧', '蕭'),
        ('萨', '薩'), ('营', '營'), ('蒋', '蔣'), ('蒙', '蒙'),
        ('蓝', '藍'), ('蔑', '蔑'), ('蔡', '蔡'), ('虑', '慮'),

        // ===== Communication =====
        ('邮', '郵'), ('邻', '鄰'), ('郑', '鄭'), ('邓', '鄧'),
        ('酿', '釀'), ('醒', '醒'), ('释', '釋'),

        // ===== Geography / Direction =====
        ('冈', '岡'), ('州', '州'), ('页', '頁'), ('顶', '頂'),
        ('顷', '頃'), ('项', '項'), ('须', '須'), ('顺', '順'),
        ('预', '預'), ('颈', '頸'), ('领', '領'), ('频', '頻'),
        ('题', '題'), ('颜', '顏'), ('额', '額'), ('颠', '顛'),
        ('显', '顯'), ('愿', '願'),
        ('飞', '飛'), ('食', '食'), ('养', '養'),
        ('饥', '飢'), ('饵', '餌'),

        // ===== Other common characters =====
        ('丑', '醜'), ('专', '專'), ('业', '業'), ('丛', '叢'),
        ('东', '東'), ('丝', '絲'), ('丢', '丟'), ('两', '兩'),
        ('严', '嚴'), ('丧', '喪'), ('临', '臨'), ('举', '舉'),
        ('义', '義'), ('乐', '樂'), ('乔', '喬'), ('习', '習'),
        ('乡', '鄉'), ('争', '爭'), ('亏', '虧'), ('亚', '亞'),
        ('仅', '僅'), ('从', '從'), ('仑', '侖'), ('仓', '倉'),
        ('众', '眾'), ('伞', '傘'), ('伪', '偽'), ('佣', '傭'),
        ('佩', '佩'), ('侣', '侶'), ('侨', '僑'), ('俭', '儉'),
        ('俩', '倆'), ('债', '債'), ('倾', '傾'), ('偿', '償'),
        ('储', '儲'), ('兑', '兌'), ('党', '黨'), ('兰', '蘭'),
        ('关', '關'), ('兴', '興'), ('养', '養'), ('冻', '凍'),
        ('净', '淨'), ('凉', '涼'), ('减', '減'), ('凤', '鳳'),
        ('刮', '颳'), ('划', '劃'), ('则', '則'), ('刹', '剎'),
        ('剥', '剝'), ('剧', '劇'),
        ('劲', '勁'), ('励', '勵'), ('劳', '勞'), ('势', '勢'),

        // ===== Supplementary common characters =====
        ('奥', '奧'), ('妇', '婦'), ('孙', '孫'), ('宁', '寧'),
        ('宽', '寬'), ('审', '審'), ('宾', '賓'), ('将', '將'),
        ('尔', '爾'), ('尝', '嘗'), ('岁', '歲'), ('岗', '崗'),
        ('岭', '嶺'), ('帐', '帳'), ('帜', '幟'), ('帧', '幀'),
        ('师', '師'), ('庙', '廟'), ('庞', '龐'), ('废', '廢'),
        ('建', '建'), ('弃', '棄'), ('录', '錄'), ('彻', '徹'),
        ('怜', '憐'), ('总', '總'), ('悬', '懸'), ('惊', '驚'),
        ('惩', '懲'), ('惯', '慣'), ('愁', '愁'), ('戏', '戲'),
        ('户', '戶'), ('执', '執'), ('扑', '撲'), ('托', '託'),
        ('扫', '掃'), ('抚', '撫'), ('担', '擔'), ('拟', '擬'),
        ('拢', '攏'), ('拣', '揀'), ('拥', '擁'), ('挂', '掛'),
        ('挥', '揮'), ('挤', '擠'), ('损', '損'), ('捡', '撿'),
        ('授', '授'), ('掷', '擲'), ('搁', '擱'), ('搂', '摟'),
        ('摆', '擺'), ('撑', '撐'), ('数', '數'), ('整', '整'),
        ('斗', '鬥'), ('斩', '斬'), ('断', '斷'), ('无', '無'),
        ('旷', '曠'), ('昼', '晝'), ('晋', '晉'), ('晒', '曬'),
        ('晕', '暈'), ('晓', '曉'), ('暂', '暫'), ('曾', '曾'),
        ('朝', '朝'), ('术', '術'), ('机', '機'), ('杀', '殺'),
        ('杂', '雜'), ('权', '權'), ('杰', '傑'), ('松', '鬆'),
        ('枪', '槍'), ('柜', '櫃'), ('栅', '柵'), ('标', '標'),
        ('栈', '棧'), ('桩', '樁'), ('梁', '樑'), ('梦', '夢'),
        ('检', '檢'), ('棂', '欞'), ('椭', '橢'), ('楼', '樓'),
        ('概', '概'), ('榄', '欖'), ('模', '模'), ('横', '橫'),
        ('档', '檔'), ('桥', '橋'), ('桩', '樁'), ('梯', '梯'),
        ('欢', '歡'), ('歼', '殲'), ('殇', '殤'), ('残', '殘'),
        ('毁', '毀'), ('毕', '畢'), ('气', '氣'), ('汇', '匯'),
        ('汉', '漢'), ('汤', '湯'), ('沟', '溝'), ('沦', '淪'),
        ('沪', '滬'), ('沾', '沾'), ('泄', '洩'), ('泪', '淚'),
        ('泻', '瀉'), ('泽', '澤'), ('洁', '潔'), ('浅', '淺'),
        ('浆', '漿'), ('浇', '澆'), ('浊', '濁'), ('测', '測'),
        ('浏', '瀏'), ('浑', '渾'), ('涛', '濤'), ('涝', '澇'),
        ('润', '潤'), ('涩', '澀'), ('淀', '澱'), ('渊', '淵'),
        ('渐', '漸'), ('渔', '漁'), ('温', '溫'), ('湾', '灣'),
        ('溃', '潰'), ('满', '滿'), ('滚', '滾'), ('滞', '滯'),
        ('滤', '濾'), ('濒', '瀕'), ('灭', '滅'), ('灿', '燦'),
        ('烁', '爍'), ('烂', '爛'), ('烟', '煙'), ('烦', '煩'),
        ('烧', '燒'), ('焕', '煥'), ('煌', '煌'),
        ('献', '獻'), ('猪', '豬'), ('猫', '貓'), ('犯', '犯'),
        ('状', '狀'), ('狭', '狹'), ('独', '獨'), ('狮', '獅'),
        ('猎', '獵'), ('猛', '猛'), ('猜', '猜'), ('猴', '猴'),
        ('玛', '瑪'), ('环', '環'), ('现', '現'), ('珍', '珍'),
        ('珠', '珠'), ('琴', '琴'), ('瑶', '瑤'), ('理', '理'),
        ('疮', '瘡'), ('痒', '癢'), ('痕', '痕'), ('疯', '瘋'),
        ('疼', '疼'), ('症', '症'), ('瘦', '瘦'),
        ('盖', '蓋'), ('盐', '鹽'), ('监', '監'), ('盘', '盤'),
        ('盾', '盾'), ('眯', '瞇'), ('矿', '礦'), ('码', '碼'),
        ('碍', '礙'), ('础', '礎'), ('确', '確'), ('硕', '碩'),
        ('礼', '禮'), ('祸', '禍'), ('禅', '禪'), ('离', '離'),
        ('种', '種'), ('秆', '稈'), ('积', '積'), ('称', '稱'),
        ('稳', '穩'), ('穷', '窮'), ('窃', '竊'), ('窍', '竅'),
        ('窜', '竄'), ('窝', '窩'), ('竞', '競'), ('笔', '筆'),
        ('笼', '籠'), ('筑', '築'), ('节', '節'), ('范', '範'),
        ('简', '簡'), ('签', '簽'), ('篮', '籃'), ('篱', '籬'),
        ('粪', '糞'), ('粮', '糧'), ('纠', '糾'), ('红', '紅'),
        ('纤', '纖'), ('约', '約'), ('纪', '紀'), ('纬', '緯'),
        ('纯', '純'), ('纱', '紗'), ('纲', '綱'), ('纳', '納'),
        ('纵', '縱'), ('纷', '紛'), ('纸', '紙'), ('纹', '紋'),
        ('纺', '紡'), ('纽', '紐'), ('线', '線'), ('绍', '紹'),
        ('绑', '綁'), ('经', '經'), ('绒', '絨'), ('结', '結'),
        ('绕', '繞'), ('绘', '繪'), ('给', '給'), ('络', '絡'),
        ('绝', '絕'), ('统', '統'), ('丝', '絲'), ('绞', '絞'),
        ('绢', '絹'), ('绣', '繡'), ('绥', '綏'), ('继', '繼'),
        ('绩', '績'), ('绪', '緒'), ('续', '續'), ('绳', '繩'),
        ('维', '維'), ('绵', '綿'), ('综', '綜'), ('编', '編'),
        ('缓', '緩'), ('缔', '締'), ('缘', '緣'), ('缚', '縛'),
        ('缝', '縫'), ('缠', '纏'), ('缩', '縮'), ('缴', '繳'),
        ('网', '網'), ('罗', '羅'), ('罚', '罰'), ('罢', '罷'),
        ('翼', '翼'), ('耻', '恥'), ('联', '聯'), ('聪', '聰'),
        ('肃', '肅'), ('胆', '膽'), ('胧', '朧'), ('脏', '臟'),
        ('脑', '腦'), ('脓', '膿'), ('脸', '臉'), ('腊', '臘'),
        ('腻', '膩'), ('腾', '騰'), ('临', '臨'), ('举', '舉'),
        ('艰', '艱'), ('苹', '蘋'), ('范', '範'), ('茎', '莖'),
        ('荆', '荊'), ('荐', '薦'), ('荡', '蕩'), ('荣', '榮'),
        ('药', '藥'), ('莲', '蓮'), ('菜', '菜'), ('萌', '萌'),
        ('营', '營'), ('落', '落'), ('著', '著'), ('葱', '蔥'),
        ('蒋', '蔣'), ('蓝', '藍'), ('蔽', '蔽'), ('薪', '薪'),
        ('藏', '藏'), ('虏', '虜'), ('虑', '慮'), ('虫', '蟲'),
        ('蚀', '蝕'), ('蛮', '蠻'), ('蜡', '蠟'), ('蝇', '蠅'),
        ('蚁', '蟻'), ('蜗', '蝸'), ('蝉', '蟬'),
        ('补', '補'), ('衬', '襯'), ('衰', '衰'), ('袄', '襖'),
        ('袜', '襪'), ('裤', '褲'), ('裹', '裹'),
        ('觉', '覺'), ('观', '觀'), ('览', '覽'), ('规', '規'),
        ('视', '視'), ('觅', '覓'), ('触', '觸'),
        ('订', '訂'), ('认', '認'), ('讨', '討'), ('让', '讓'),
        ('训', '訓'), ('议', '議'), ('讯', '訊'), ('许', '許'),
        ('论', '論'), ('讽', '諷'), ('设', '設'), ('访', '訪'),
        ('证', '證'), ('评', '評'), ('识', '識'), ('诊', '診'),
        ('词', '詞'), ('译', '譯'), ('试', '試'), ('诗', '詩'),
        ('诚', '誠'), ('话', '話'), ('该', '該'), ('详', '詳'),
        ('诱', '誘'), ('说', '說'), ('请', '請'), ('诸', '諸'),
        ('诺', '諾'), ('读', '讀'), ('课', '課'), ('谁', '誰'),
        ('调', '調'), ('谅', '諒'), ('谈', '談'), ('谊', '誼'),
        ('谋', '謀'), ('谐', '諧'), ('谢', '謝'), ('谣', '謠'),
        ('谦', '謙'), ('谨', '謹'), ('谱', '譜'), ('谴', '譴'),
        ('赋', '賦'),
        ('起', '起'), ('赵', '趙'), ('越', '越'),
        ('车', '車'), ('轧', '軋'), ('转', '轉'), ('轮', '輪'),
        ('软', '軟'), ('轰', '轟'), ('轻', '輕'), ('载', '載'),
        ('辆', '輛'), ('辈', '輩'), ('输', '輸'), ('辉', '輝'),
        ('辊', '輥'), ('辖', '轄'), ('辗', '輾'), ('辙', '轍'),
        ('辽', '遼'), ('达', '達'), ('迁', '遷'), ('过', '過'),
        ('运', '運'), ('近', '近'), ('还', '還'), ('这', '這'),
        ('进', '進'), ('远', '遠'), ('违', '違'), ('连', '連'),
        ('迟', '遲'), ('迹', '跡'), ('适', '適'), ('选', '選'),
        ('逊', '遜'), ('递', '遞'), ('逻', '邏'), ('遗', '遺'),
        ('邓', '鄧'), ('邮', '郵'), ('邻', '鄰'), ('郑', '鄭'),
        ('鉴', '鑒'), ('钉', '釘'), ('钓', '釣'), ('钙', '鈣'),
        ('钟', '鐘'), ('钢', '鋼'), ('钦', '欽'), ('钩', '鉤'),
        ('钱', '錢'), ('钻', '鑽'), ('铁', '鐵'), ('铃', '鈴'),
        ('铅', '鉛'), ('铜', '銅'), ('铝', '鋁'), ('铭', '銘'),
        ('银', '銀'), ('铸', '鑄'), ('铺', '鋪'), ('链', '鏈'),
        ('锁', '鎖'), ('锅', '鍋'), ('锋', '鋒'), ('锐', '銳'),
        ('错', '錯'), ('锡', '錫'), ('锣', '鑼'), ('锤', '錘'),
        ('锦', '錦'), ('键', '鍵'), ('锭', '錠'), ('镀', '鍍'),
        ('镇', '鎮'), ('镜', '鏡'), ('闪', '閃'), ('闭', '閉'),
        ('问', '問'), ('闲', '閒'), ('间', '間'), ('闷', '悶'),
        ('闻', '聞'), ('闹', '鬧'), ('阁', '閣'), ('阀', '閥'),
        ('阅', '閱'), ('阔', '闊'), ('队', '隊'), ('阳', '陽'),
        ('阴', '陰'), ('阵', '陣'), ('阶', '階'), ('际', '際'),
        ('陆', '陸'), ('陈', '陳'), ('险', '險'), ('随', '隨'),
        ('隐', '隱'), ('隶', '隸'), ('雾', '霧'),
        ('韩', '韓'), ('韵', '韻'), ('页', '頁'), ('顶', '頂'),
        ('项', '項'), ('顺', '順'), ('须', '須'), ('顽', '頑'),
        ('顾', '顧'), ('预', '預'), ('领', '領'), ('颈', '頸'),
        ('频', '頻'), ('题', '題'), ('颜', '顏'), ('额', '額'),
        ('颤', '顫'), ('风', '風'), ('飞', '飛'), ('饥', '飢'),
        ('饭', '飯'), ('饮', '飲'), ('饱', '飽'), ('饲', '飼'),
        ('饰', '飾'), ('饺', '餃'), ('饼', '餅'), ('饿', '餓'),
        ('馆', '館'), ('馈', '饋'), ('馒', '饅'),
        ('驰', '馳'), ('驱', '驅'), ('驳', '駁'), ('驴', '驢'),
        ('驻', '駐'), ('驾', '駕'), ('骆', '駱'), ('骑', '騎'),
        ('骗', '騙'), ('骄', '驕'), ('验', '驗'), ('骤', '驟'),
        ('髅', '髏'), ('鬓', '鬢'),
        ('鸡', '雞'), ('鸣', '鳴'), ('鸭', '鴨'), ('鸽', '鴿'),
        ('鸿', '鴻'), ('鹏', '鵬'), ('鹤', '鶴'), ('鹰', '鷹'),
        ('鹿', '鹿'), ('麦', '麥'), ('麻', '麻'), ('黄', '黃'),
        ('龙', '龍'), ('龟', '龜'),
        ('鱼', '魚'), ('鲜', '鮮'), ('鲸', '鯨'), ('鳄', '鱷'),
    ];

    pairs.iter().copied().collect()
}

/// Traditional-to-Simplified mapping table (auto-reversed from Simplified-Traditional table)
fn traditional_to_simplified_map() -> HashMap<char, char> {
    simplified_to_traditional_map()
        .into_iter()
        .filter(|(s, t)| s != t) // Exclude characters that are identical in both
        .map(|(s, t)| (t, s))
        .collect()
}

/// Charset converter
pub struct CharsetConverter;

impl CharsetConverter {
    /// Convert text from one charset to another
    pub fn convert(text: &str, from: &Charset, to: &Charset) -> String {
        if from == to {
            return text.to_string();
        }

        match (from, to) {
            (Charset::Simplified, Charset::Traditional) => {
                let map = simplified_to_traditional_map();
                text.chars().map(|c| *map.get(&c).unwrap_or(&c)).collect()
            },
            (Charset::Traditional, Charset::Simplified) => {
                let map = traditional_to_simplified_map();
                text.chars().map(|c| *map.get(&c).unwrap_or(&c)).collect()
            },
            _ => text.to_string(),
        }
    }

    /// Convert a list of candidate characters
    pub fn convert_candidates(candidates: &[char], from: &Charset, to: &Charset) -> Vec<char> {
        if from == to {
            return candidates.to_vec();
        }

        match (from, to) {
            (Charset::Simplified, Charset::Traditional) => {
                let map = simplified_to_traditional_map();
                candidates.iter().map(|c| *map.get(c).unwrap_or(c)).collect()
            },
            (Charset::Traditional, Charset::Simplified) => {
                let map = traditional_to_simplified_map();
                candidates.iter().map(|c| *map.get(c).unwrap_or(c)).collect()
            },
            _ => candidates.to_vec(),
        }
    }
}

#[cfg(test)]
mod tests {
    use super::*;
    use maidos_config::Charset;

    #[test]
    fn test_convert_same_charset() {
        let text = "\u{4F60}\u{597D}\u{4E16}\u{754C}";
        let result = CharsetConverter::convert(text, &Charset::Traditional, &Charset::Traditional);
        assert_eq!(result, text);
    }

    #[test]
    fn test_convert_simplified_to_traditional() {
        let text = "\u{6211}\u{4EEC}\u{4ECA}\u{5929}\u{597D}\u{597D}\u{5B66}\u{4E60}";
        let result = CharsetConverter::convert(text, &Charset::Simplified, &Charset::Traditional);
        assert_eq!(result, "\u{6211}\u{5011}\u{4ECA}\u{5929}\u{597D}\u{597D}\u{5B78}\u{7FD2}");
    }

    #[test]
    fn test_convert_traditional_to_simplified() {
        let text = "\u{6211}\u{5011}\u{4ECA}\u{5929}\u{597D}\u{597D}\u{5B78}\u{7FD2}";
        let result = CharsetConverter::convert(text, &Charset::Traditional, &Charset::Simplified);
        assert_eq!(result, "\u{6211}\u{4EEC}\u{4ECA}\u{5929}\u{597D}\u{597D}\u{5B66}\u{4E60}");
    }

    #[test]
    fn test_convert_candidates() {
        let candidates = vec!['\u{6211}', '\u{4EEC}', '\u{5B66}', '\u{4E60}'];
        let result = CharsetConverter::convert_candidates(&candidates, &Charset::Simplified, &Charset::Traditional);
        assert_eq!(result, vec!['\u{6211}', '\u{5011}', '\u{5B78}', '\u{7FD2}']);
    }

    #[test]
    fn test_extended_conversion() {
        // Test extended conversion table
        let text = "\u{56FD}\u{9645}\u{7ECF}\u{6D4E}\u{53D1}\u{5C55}";
        let result = CharsetConverter::convert(text, &Charset::Simplified, &Charset::Traditional);
        assert_eq!(result, "\u{570B}\u{969B}\u{7D93}\u{6FDF}\u{767C}\u{5C55}");
    }

    #[test]
    fn test_reverse_extended_conversion() {
        let text = "\u{570B}\u{969B}\u{7D93}\u{6FDF}\u{767C}\u{5C55}";
        let result = CharsetConverter::convert(text, &Charset::Traditional, &Charset::Simplified);
        assert_eq!(result, "\u{56FD}\u{9645}\u{7ECF}\u{6D4E}\u{53D1}\u{5C55}");
    }

    #[test]
    fn test_mixed_text_conversion() {
        // Mixed simplified/traditional + English + numbers
        let text = "hello \u{4F60}\u{597D} world \u{5B66}\u{4E60}123";
        let result = CharsetConverter::convert(text, &Charset::Simplified, &Charset::Traditional);
        assert_eq!(result, "hello \u{4F60}\u{597D} world \u{5B78}\u{7FD2}123");
    }

    #[test]
    fn test_mapping_table_size() {
        let s2t = simplified_to_traditional_map();
        // Verify the mapping table has at least the main simplified-traditional correspondences
        assert!(s2t.len() >= 500, "Simplified-to-Traditional map should have at least 500 entries, got {}", s2t.len());
    }
}
